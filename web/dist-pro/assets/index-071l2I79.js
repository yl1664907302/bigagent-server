var Y=(e,t,n)=>new Promise((o,f)=>{var N=h=>{try{a(n.next(h))}catch(g){f(g)}},b=h=>{try{a(n.throw(h))}catch(g){f(g)}},a=h=>h.done?o(h.value):Promise.resolve(h.value).then(N,b);a((n=n.apply(e,t)).next())});import{k as nt,l as at,m as lt,_ as ot}from"./index-BGZQasTF.js";import rt from"./form-CNLNGXI8.js";import{e as it,S as j,U as r,l as Ke,Z as se,r as F,w as st,c as ct,b as ut,m as z,p as H,O as p,q as y,u as K,R as te,T as J,F as fe,a7 as he,P as dt,M as Ee,ah as Ie,ai as D,ar as pt,aK as ft,aL as ht}from"./vue-chunks-QFn3aUvO.js";import{H as me,I as Se,J as Le,b as R,C as mt}from"./element-plus-C3gpGjIx.js";var ve={d:(e,t)=>{for(var n in t)ve.o(t,n)&&!ve.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},Re={};function Ve(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function We(e,t){if(e){if(typeof e=="string")return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}function ge(e){return function(t){if(Array.isArray(t))return Ve(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||We(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ve.d(Re,{Z:()=>_t});const u=(Be={computed:()=>it,createTextVNode:()=>j,createVNode:()=>r,defineComponent:()=>Ke,reactive:()=>se,ref:()=>F,watch:()=>st,watchEffect:()=>ct},Ne={},ve.d(Ne,Be),Ne),vt=(0,u.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var e=this.data,t=this.onClick;return(0,u.createVNode)("span",{class:"vjs-tree-brackets",onClick:t},[e])}}),gt=(0,u.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(e,t){var n=t.emit;return{uiType:(0,u.computed)(function(){return e.isMultiple?"checkbox":"radio"}),model:(0,u.computed)({get:function(){return e.checked},set:function(o){return n("update:modelValue",o)}})}},render:function(){var e=this.uiType,t=this.model,n=this.$emit;return(0,u.createVNode)("label",{class:["vjs-check-controller",t?"is-checked":""],onClick:function(o){return o.stopPropagation()}},[(0,u.createVNode)("span",{class:"vjs-check-controller-inner is-".concat(e)},null),(0,u.createVNode)("input",{checked:t,class:"vjs-check-controller-original is-".concat(e),type:e,onChange:function(){return n("change",t)}},null)])}}),yt=(0,u.defineComponent)({props:{nodeType:{required:!0,type:String},onClick:Function},render:function(){var e=this.nodeType,t=this.onClick,n=e==="objectStart"||e==="arrayStart";return n||e==="objectCollapsed"||e==="arrayCollapsed"?(0,u.createVNode)("span",{class:"vjs-carets vjs-carets-".concat(n?"open":"close"),onClick:t},[(0,u.createVNode)("svg",{viewBox:"0 0 1024 1024",focusable:"false","data-icon":"caret-down",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},[(0,u.createVNode)("path",{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"},null)])]):null}});var Be,Ne;function Oe(e){return Oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(e)}function qe(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function ne(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"root",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,f=o||{},N=f.key,b=f.index,a=f.type,h=a===void 0?"content":a,g=f.showComma,x=g!==void 0&&g,P=f.length,L=P===void 0?1:P,E=qe(e);if(E==="array"){var I=Ae(e.map(function(O,_,l){return ne(O,"".concat(t,"[").concat(_,"]"),n+1,{index:_,showComma:_!==l.length-1,length:L,type:h})}));return[ne("[",t,n,{showComma:!1,key:N,length:e.length,type:"arrayStart"})[0]].concat(I,ne("]",t,n,{showComma:x,length:e.length,type:"arrayEnd"})[0])}if(E==="object"){var V=Object.keys(e),w=Ae(V.map(function(O,_,l){return ne(e[O],/^[a-zA-Z_]\w*$/.test(O)?"".concat(t,".").concat(O):"".concat(t,'["').concat(O,'"]'),n+1,{key:O,showComma:_!==l.length-1,length:L,type:h})}));return[ne("{",t,n,{showComma:!1,key:N,index:b,length:V.length,type:"objectStart"})[0]].concat(w,ne("}",t,n,{showComma:x,length:V.length,type:"objectEnd"})[0])}return[{content:e,level:n,key:N,index:b,path:t,showComma:x,length:L,type:h}]}function Ae(e){if(typeof Array.prototype.flat=="function")return e.flat();for(var t=ge(e),n=[];t.length;){var o=t.shift();Array.isArray(o)?t.unshift.apply(t,ge(o)):n.push(o)}return n}function je(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new WeakMap;if(e==null)return e;if(e instanceof Date)return new Date(e);if(e instanceof RegExp)return new RegExp(e);if(Oe(e)!=="object")return e;if(t.get(e))return t.get(e);if(Array.isArray(e)){var n=e.map(function(N){return je(N,t)});return t.set(e,n),n}var o={};for(var f in e)o[f]=je(e[f],t);return t.set(e,o),o}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),n.push.apply(n,o)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ze(Object(n),!0).forEach(function(o){ye(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}var Je={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},renderNodeKey:Function,renderNodeValue:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},showLineNumber:{type:Boolean,default:!1},selectOnClickNode:{type:Boolean,default:!0},nodeSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!1},theme:{type:String,default:"light"},showKeyValueSpace:{type:Boolean,default:!0},editable:{type:Boolean,default:!1},editableTrigger:{type:String,default:"click"},onNodeClick:{type:Function},onBracketsClick:{type:Function},onIconClick:{type:Function},onValueChange:{type:Function}};const bt=(0,u.defineComponent)({name:"TreeNode",props:Ue(Ue({},Je),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,style:Object,onSelectedChange:{type:Function}}),emits:["nodeClick","bracketsClick","iconClick","selectedChange","valueChange"],setup:function(e,t){var n=t.emit,o=(0,u.computed)(function(){return qe(e.node.content)}),f=(0,u.computed)(function(){return"vjs-value vjs-value-".concat(o.value)}),N=(0,u.computed)(function(){return e.showDoubleQuotes?'"'.concat(e.node.key,'"'):e.node.key}),b=(0,u.computed)(function(){return e.selectableType==="multiple"}),a=(0,u.computed)(function(){return e.selectableType==="single"}),h=(0,u.computed)(function(){return e.nodeSelectable(e.node)&&(b.value||a.value)}),g=(0,u.reactive)({editing:!1}),x=function(_){var l,c,m=(c=(l=_.target)===null||l===void 0?void 0:l.value)==="null"?null:c==="undefined"?void 0:c==="true"||c!=="false"&&(c[0]+c[c.length-1]==='""'||c[0]+c[c.length-1]==="''"?c.slice(1,-1):typeof Number(c)=="number"&&!isNaN(Number(c))||c==="NaN"?Number(c):c);n("valueChange",m,e.node.path)},P=(0,u.computed)(function(){var _,l=(_=e.node)===null||_===void 0?void 0:_.content;return l===null?l="null":l===void 0&&(l="undefined"),o.value==="string"?'"'.concat(l,'"'):l+""}),L=function(){var _=e.renderNodeValue;return _?_({node:e.node,defaultValue:P.value}):P.value},E=function(){n("bracketsClick",!e.collapsed,e.node)},I=function(){n("iconClick",!e.collapsed,e.node)},V=function(){n("selectedChange",e.node)},w=function(){n("nodeClick",e.node),h.value&&e.selectOnClickNode&&n("selectedChange",e.node)},O=function(_){if(e.editable&&!g.editing){g.editing=!0;var l=function c(m){var v;m.target!==_.target&&((v=m.target)===null||v===void 0?void 0:v.parentElement)!==_.target&&(g.editing=!1,document.removeEventListener("click",c))};document.removeEventListener("click",l),document.addEventListener("click",l)}};return function(){var _,l=e.node;return(0,u.createVNode)("div",{class:{"vjs-tree-node":!0,"has-selector":e.showSelectController,"has-carets":e.showIcon,"is-highlight":e.highlightSelectedNode&&e.checked,dark:e.theme==="dark"},onClick:w,style:e.style},[e.showLineNumber&&(0,u.createVNode)("span",{class:"vjs-node-index"},[l.id+1]),e.showSelectController&&h.value&&l.type!=="objectEnd"&&l.type!=="arrayEnd"&&(0,u.createVNode)(gt,{isMultiple:b.value,checked:e.checked,onChange:V},null),(0,u.createVNode)("div",{class:"vjs-indent"},[Array.from(Array(l.level)).map(function(c,m){return(0,u.createVNode)("div",{key:m,class:{"vjs-indent-unit":!0,"has-line":e.showLine}},null)}),e.showIcon&&(0,u.createVNode)(yt,{nodeType:l.type,onClick:I},null)]),l.key&&(0,u.createVNode)("span",{class:"vjs-key"},[(_=e.renderNodeKey,_?_({node:e.node,defaultKey:N.value||""}):N.value),(0,u.createVNode)("span",{class:"vjs-colon"},[":".concat(e.showKeyValueSpace?" ":"")])]),(0,u.createVNode)("span",null,[l.type!=="content"&&l.content?(0,u.createVNode)(vt,{data:l.content.toString(),onClick:E},null):(0,u.createVNode)("span",{class:f.value,onClick:!e.editable||e.editableTrigger&&e.editableTrigger!=="click"?void 0:O,onDblclick:e.editable&&e.editableTrigger==="dblclick"?O:void 0},[e.editable&&g.editing?(0,u.createVNode)("input",{value:P.value,onChange:x,style:{padding:"3px 8px",border:"1px solid #eee",boxShadow:"none",boxSizing:"border-box",borderRadius:5,fontFamily:"inherit"}},null):L()]),l.showComma&&(0,u.createVNode)("span",null,[","]),e.showLength&&e.collapsed&&(0,u.createVNode)("span",{class:"vjs-comment"},[(0,u.createTextVNode)(" // "),l.length,(0,u.createTextVNode)(" items ")])])])}}});function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),n.push.apply(n,o)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fe(Object(n),!0).forEach(function(o){ye(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}const _t=(0,u.defineComponent)({name:"Tree",props:U(U({},Je),{},{data:{type:[String,Number,Boolean,Array,Object],default:null},collapsedNodeLength:{type:Number,default:1/0},deep:{type:Number,default:1/0},pathCollapsible:{type:Function,default:function(){return!1}},rootPath:{type:String,default:"root"},virtual:{type:Boolean,default:!1},height:{type:Number,default:400},itemHeight:{type:Number,default:20},selectedValue:{type:[String,Array],default:function(){return""}},collapsedOnClickBrackets:{type:Boolean,default:!0},style:Object,onSelectedChange:{type:Function},theme:{type:String,default:"light"}}),slots:["renderNodeKey","renderNodeValue"],emits:["nodeClick","bracketsClick","iconClick","selectedChange","update:selectedValue","update:data"],setup:function(e,t){var n=t.emit,o=t.slots,f=(0,u.ref)(),N=(0,u.computed)(function(){return ne(e.data,e.rootPath)}),b=function(l,c){return N.value.reduce(function(m,v){var C,k=v.level>=l||v.length>=c,T=(C=e.pathCollapsible)===null||C===void 0?void 0:C.call(e,v);return v.type!=="objectStart"&&v.type!=="arrayStart"||!k&&!T?m:U(U({},m),{},ye({},v.path,1))},{})},a=(0,u.reactive)({translateY:0,visibleData:null,hiddenPaths:b(e.deep,e.collapsedNodeLength)}),h=(0,u.computed)(function(){for(var l=null,c=[],m=N.value.length,v=0;v<m;v++){var C=U(U({},N.value[v]),{},{id:v}),k=a.hiddenPaths[C.path];if(l&&l.path===C.path){var T=l.type==="objectStart",A=U(U(U({},C),l),{},{showComma:C.showComma,content:T?"{...}":"[...]",type:T?"objectCollapsed":"arrayCollapsed"});l=null,c.push(A)}else{if(k&&!l){l=C;continue}if(l)continue;c.push(C)}}return c}),g=(0,u.computed)(function(){var l=e.selectedValue;return l&&e.selectableType==="multiple"&&Array.isArray(l)?l:[l]}),x=(0,u.computed)(function(){return!e.selectableType||e.selectOnClickNode||e.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."}),P=function(){var l=h.value;if(e.virtual){var c,m=e.height/e.itemHeight,v=((c=f.value)===null||c===void 0?void 0:c.scrollTop)||0,C=Math.floor(v/e.itemHeight),k=C<0?0:C+m>l.length?l.length-m:C;k<0&&(k=0);var T=k+m;a.translateY=k*e.itemHeight,a.visibleData=l.filter(function(A,Z){return Z>=k&&Z<T})}else a.visibleData=l},L=function(){P()},E=function(l){var c,m,v=l.path,C=e.selectableType;if(C==="multiple"){var k=g.value.findIndex(function(M){return M===v}),T=ge(g.value);k!==-1?T.splice(k,1):T.push(v),n("update:selectedValue",T),n("selectedChange",T,ge(g.value))}else if(C==="single"&&g.value[0]!==v){var A=(c=g.value,m=1,function(M){if(Array.isArray(M))return M}(c)||function(M,ue){var W=M==null?null:typeof Symbol!="undefined"&&M[Symbol.iterator]||M["@@iterator"];if(W!=null){var de,oe,re=[],ie=!0,G=!1;try{for(W=W.call(M);!(ie=(de=W.next()).done)&&(re.push(de.value),!ue||re.length!==ue);ie=!0);}catch(ae){G=!0,oe=ae}finally{try{ie||W.return==null||W.return()}finally{if(G)throw oe}}return re}}(c,m)||We(c,m)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())[0],Z=v;n("update:selectedValue",Z),n("selectedChange",Z,A)}},I=function(l){n("nodeClick",l)},V=function(l,c){if(l)a.hiddenPaths=U(U({},a.hiddenPaths),{},ye({},c,1));else{var m=U({},a.hiddenPaths);delete m[c],a.hiddenPaths=m}},w=function(l,c){e.collapsedOnClickBrackets&&V(l,c.path),n("bracketsClick",l,c)},O=function(l,c){V(l,c.path),n("iconClick",l,c)},_=function(l,c){var m=je(e.data),v=e.rootPath;new Function("data","val","data".concat(c.slice(v.length),"=val"))(m,l),n("update:data",m)};return(0,u.watchEffect)(function(){x.value&&function(l){throw new Error("[VueJSONPretty] ".concat(l))}(x.value)}),(0,u.watchEffect)(function(){h.value&&P()}),(0,u.watch)(function(){return e.deep},function(l){l&&(a.hiddenPaths=b(l,e.collapsedNodeLength))}),(0,u.watch)(function(){return e.collapsedNodeLength},function(l){l&&(a.hiddenPaths=b(e.deep,l))}),function(){var l,c,m=(l=e.renderNodeKey)!==null&&l!==void 0?l:o.renderNodeKey,v=(c=e.renderNodeValue)!==null&&c!==void 0?c:o.renderNodeValue,C=a.visibleData&&a.visibleData.map(function(k){return(0,u.createVNode)(bt,{key:k.id,node:k,collapsed:!!a.hiddenPaths[k.path],theme:e.theme,showDoubleQuotes:e.showDoubleQuotes,showLength:e.showLength,checked:g.value.includes(k.path),selectableType:e.selectableType,showLine:e.showLine,showLineNumber:e.showLineNumber,showSelectController:e.showSelectController,selectOnClickNode:e.selectOnClickNode,nodeSelectable:e.nodeSelectable,highlightSelectedNode:e.highlightSelectedNode,editable:e.editable,editableTrigger:e.editableTrigger,showIcon:e.showIcon,showKeyValueSpace:e.showKeyValueSpace,renderNodeKey:m,renderNodeValue:v,onNodeClick:I,onBracketsClick:w,onIconClick:O,onSelectedChange:E,onValueChange:_,style:e.itemHeight&&e.itemHeight!==20?{lineHeight:"".concat(e.itemHeight,"px")}:{}},null)});return(0,u.createVNode)("div",{ref:f,class:{"vjs-tree":!0,"is-virtual":e.virtual,dark:e.theme==="dark"},onScroll:e.virtual?L:void 0,style:e.showLineNumber?U({paddingLeft:"".concat(12*Number(N.value.length.toString().length),"px")},e.style):e.style},[e.virtual?(0,u.createVNode)("div",{class:"vjs-tree-list",style:{height:"".concat(e.height,"px")}},[(0,u.createVNode)("div",{class:"vjs-tree-list-holder",style:{height:"".concat(h.value.length*e.itemHeight,"px")}},[(0,u.createVNode)("div",{class:"vjs-tree-list-holder-inner",style:{transform:"translateY(".concat(a.translateY,"px)")}},[C])])]):C])}}});var Me=Re.Z;function wt(e,t){return Y(this,null,function*(){const n=e.getReader();let o;for(;!(o=yield n.read()).done;)t(o.value)})}function kt(e){let t,n,o,f=!1;return function(b){t===void 0?(t=b,n=0,o=-1):t=St(t,b);const a=t.length;let h=0;for(;n<a;){f&&(t[n]===10&&(h=++n),f=!1);let g=-1;for(;n<a&&g===-1;++n)switch(t[n]){case 58:o===-1&&(o=n-h);break;case 13:f=!0;case 10:g=n;break}if(g===-1)break;e(t.subarray(h,g),o),h=n,o=-1}h===a?t=void 0:h!==0&&(t=t.subarray(h),n-=h)}}function Ct(e,t,n){let o=$e();const f=new TextDecoder;return function(b,a){if(b.length===0)n==null||n(o),o=$e();else if(a>0){const h=f.decode(b.subarray(0,a)),g=a+(b[a+1]===32?2:1),x=f.decode(b.subarray(g));switch(h){case"data":o.data=o.data?o.data+`
`+x:x;break;case"event":o.event=x;break;case"id":e(o.id=x);break;case"retry":const P=parseInt(x,10);isNaN(P)||t(o.retry=P);break}}}}function St(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function $e(){return{data:"",event:"",id:"",retry:void 0}}var Nt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,o=Object.getOwnPropertySymbols(e);f<o.length;f++)t.indexOf(o[f])<0&&Object.prototype.propertyIsEnumerable.call(e,o[f])&&(n[o[f]]=e[o[f]]);return n};const xe="text/event-stream",Vt=1e3,He="last-event-id";function Ot(e,t){var{signal:n,headers:o,onopen:f,onmessage:N,onclose:b,onerror:a,openWhenHidden:h,fetch:g}=t,x=Nt(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((P,L)=>{const E=Object.assign({},o);E.accept||(E.accept=xe);let I;function V(){I.abort(),document.hidden||m()}h||document.addEventListener("visibilitychange",V);let w=Vt,O=0;function _(){document.removeEventListener("visibilitychange",V),window.clearTimeout(O),I.abort()}n==null||n.addEventListener("abort",()=>{_(),P()});const l=g!=null?g:window.fetch,c=f!=null?f:jt;function m(){return Y(this,null,function*(){var v;I=new AbortController;try{const C=yield l(e,Object.assign(Object.assign({},x),{headers:E,signal:I.signal}));yield c(C),yield wt(C.body,kt(Ct(k=>{k?E[He]=k:delete E[He]},k=>{w=k},N))),b==null||b(),_(),P()}catch(C){if(!I.signal.aborted)try{const k=(v=a==null?void 0:a(C))!==null&&v!==void 0?v:w;window.clearTimeout(O),O=window.setTimeout(m,k)}catch(k){_(),L(k)}}})}m()})}function jt(e){const t=e.headers.get("content-type");if(!(t!=null&&t.startsWith(xe)))throw new Error(`Expected content-type to be ${xe}, Actual: ${t}`)}const ce=e=>(ft("data-v-8f4167bb"),e=e(),ht(),e),xt={class:"agent-info-container"},Pt={class:"statistic-card"},Tt={style:{display:"inline-flex","align-items":"center"}},Dt={class:"statistic-footer"},Et={class:"footer-item"},It=ce(()=>y("span",null,"合法 agents",-1)),Lt={key:0,class:"green"},Bt={class:"statistic-card"},At={style:{display:"inline-flex","align-items":"center"}},zt={class:"statistic-footer"},Ut={class:"footer-item"},Ft=ce(()=>y("span",null,"agent在线率",-1)),Mt={key:0,class:"red"},$t={class:"footer-item"},Ht={key:0,class:"green"},Kt={class:"statistic-card"},Rt={style:{display:"inline-flex","align-items":"center"}},Wt={class:"statistic-footer"},qt={class:"footer-item"},Jt=ce(()=>y("span",null,"agent离线率",-1)),Qt={key:0,class:"red"},Yt={key:1,class:"green"},Zt=ce(()=>y("div",{class:"footer-item"},null,-1)),Gt=ce(()=>y("div",{class:"mt-4"},null,-1)),Xt={class:"operation-area"},en={style:{display:"inline-flex","align-items":"center"}},tn={class:"resource-item"},nn={class:"resource-title"},an={class:"resource-item"},ln={class:"resource-title"},on={class:"resource-title"},rn={class:"pagination-area"},sn={class:"metadata-container"},cn={class:"metadata-container"},un=Ke({__name:"index",setup(e){const t=F(!1),n=F(!1),o=F(!1),f=F({}),N=F({}),b=F(""),a=se({type:"",platform:"",ip:"",uuid:"",active:"",c_desc:"",c_desc2:"",c_desc_f:""}),h=[{value:"physical",label:"物理机"},{value:"virtual",label:"虚拟机"},{value:"",label:"所有"}],g=[{value:"linux",label:"LINUX"},{value:"windows",label:"WINDOWS"},{value:"",label:"所有"}],x=[{value:"1",label:"在线"},{value:"0",label:"离线"},{value:"",label:"所有"}],P=F([]),L=F([]),E=F([]),I=F(!1),V=se({currentPage:1,pageSize:10,total:0}),w=se({total_num:0,dead_num:0,alive_num:0}),O=se({uuid:"",model_name:"stand1"}),_=d=>d.includes("异常")?"danger":d.includes("正常")?"success":"warning",l=d=>{L.value=JSON.parse(JSON.stringify(d)),E.value=d.map(s=>s.uuid)},c=()=>{if(L.value.length===0){R.warning("请先选择需要操作的主机");return}t.value=!0},m=()=>{A.value.abort(),A.value=T()},v=d=>{V.pageSize=d,A.value.abort(),A.value=T()},C=d=>{V.currentPage=d,A.value.abort(),A.value=T()},k=d=>d.active===1,T=()=>{const d=new AbortController;return Ot("http://192.168.0.83:8080/v1/info_sse?page="+V.currentPage+"&pageSize="+V.pageSize+"&ip="+a.ip+"&uuid="+a.uuid+"&platform="+a.platform+"&type="+a.type+"&active="+a.active+"&c_desc="+a.c_desc+"&c_desc_f="+a.c_desc2,{signal:d.signal,headers:{Accept:"text/event-stream",Authorization:"123456"},onopen(S){return Y(this,null,function*(){if(!(S.ok&&S.status===200)){if(S.status>=400&&S.status<500&&S.status!==429)throw new Error(`Failed to connect: ${S.status}`)}})},onmessage(S){try{if(!S.data){console.warn("Empty event data received");return}const Q=JSON.parse(S.data);Z(Q)}catch(Q){console.error("解析消息失败:",Q)}},onclose(){setTimeout(T,1e3)},onerror(S){console.error("SSE 错误:",S),d.abort()}}),d},A=F(T()),Z=d=>{var s;if(!(E.value.length>0)){if(!d||!d.data){console.error("Invalid response data"),R.error("更新表格数据失败：无效数据");return}I.value=!0;try{d.data,P.value=d.data.agentInfos||[],V.total=(s=d.data.nums)!=null?s:V.total,w.total_num=d.data.nums,w.alive_num=d.data.anums,w.dead_num=d.data.dnums}catch(S){console.error("更新表格数据失败:",S),R.error("更新表格数据失败")}finally{I.value=!1}}},M=d=>Y(this,null,function*(){try{yield mt.confirm(Ie("div",null,['确认删除agent "',d.hostname,'" 吗？',Ie("span",{style:{color:"red"}},"删除后无法找回！")]),{title:"删除确认",confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}),yield ue(d.uuid)}catch(s){s!=="cancel"&&R({type:"error",message:"删除失败："+s})}finally{A.value.abort(),A.value=T()}}),ue=d=>Y(this,null,function*(){try{const S=yield nt({uuid:d});R.success(S.data)}catch(s){console.error("agent删除失败:",s),R.error("agent删除失败，请重试")}}),W=(S,...Q)=>Y(this,[S,...Q],function*(d,s=O.model_name){try{const X=yield at({uuid:d,model_name:s});f.value=X.data}catch(q){console.error("获取元数据失败:",q),R.error("获取元数据失败，请重试")}finally{}}),de=(S,...Q)=>Y(this,[S,...Q],function*(d,s=O.model_name){try{const X=yield lt({uuid:d,model_name:s});N.value=X.data}catch(q){console.error("获取元数据失败:",q),R.error("获取元数据失败，请重试")}finally{}}),oe=(d,s)=>{W(d,s),b.value="当前数据类型："+s,n.value=!0},re=d=>{if(d.active==0){R.warning("设备不在线，无法获取实时数据");return}f.value={},W(d.uuid),b.value="当前数据模型：stand1",n.value=!0},ie=d=>{if(d.active==0){R.warning("设备不在线，无法获取实时数据");return}N.value={},de(d.uuid),b.value="当前数据模型：stand1",o.value=!0},G=F(!1),ae=d=>{switch(d){case"ip":a.ip&&(a.c_desc2="",a.uuid="",a.c_desc="",a.platform="",a.type="",a.active="");break;case"uuid":a.uuid&&(a.c_desc2="",a.c_desc="",a.ip="",a.platform="",a.type="",a.active="");break;case"c_desc":a.c_desc&&(a.c_desc2="",a.uuid="",a.ip="",a.platform="",a.type="",a.active="");break;case"c_desc2":a.c_desc2&&(a.c_desc="",a.uuid="",a.ip="",a.platform="",a.type="",a.active="")}G.value=!!(a.ip||a.uuid||a.c_desc)},le=d=>d?parseInt(d):0,Qe=d=>{if(!d)return{};try{return Object.fromEntries(Object.entries(d).map(([s,S])=>[s,parseInt(S.replace("%",""))]))}catch(s){return console.error("解析磁盘使用率失败:",s),{}}};return ut(()=>{}),(d,s)=>{const S=D("el-icon"),Q=D("el-tooltip"),q=D("el-statistic"),X=D("el-col"),Ye=D("el-row"),Pe=D("el-card"),ee=D("el-button"),be=D("el-option"),_e=D("el-select"),pe=D("el-input"),B=D("el-table-column"),we=D("el-progress"),Ze=D("el-popover"),Te=D("el-tag"),ke=D("el-space"),Ge=D("el-table"),Xe=D("el-pagination"),Ce=D("el-dialog"),et=pt("loading");return z(),H("div",xt,[r(Pe,null,{default:p(()=>[r(Ye,{gutter:16},{default:p(()=>[r(X,{span:8},{default:p(()=>[y("div",Pt,[r(q,{value:w.total_num},{title:p(()=>[y("div",Tt,[j(" agent注册数 "),r(Q,{effect:"dark",content:"已经注册的agent总数",placement:"top"},{default:p(()=>[r(S,{style:{"margin-left":"4px"},size:12},{default:p(()=>[r(K(me))]),_:1})]),_:1})])]),_:1},8,["value"]),y("div",Dt,[y("div",Et,[It,w.total_num>0?(z(),H("span",Lt,[j(" 100% "),r(S,null,{default:p(()=>[r(K(Se))]),_:1})])):te("",!0)])])])]),_:1}),r(X,{span:8},{default:p(()=>[y("div",Bt,[r(q,{value:w.alive_num},{title:p(()=>[y("div",At,[j(" agent在线数 "),r(Q,{effect:"dark",content:"目前在线的agent数量",placement:"top"},{default:p(()=>[r(S,{style:{"margin-left":"4px"},size:12},{default:p(()=>[r(K(me))]),_:1})]),_:1})])]),_:1},8,["value"]),y("div",zt,[y("div",Ut,[Ft,w.alive_num<w.total_num?(z(),H("span",Mt,[j(J(Math.floor(w.alive_num/w.total_num*100))+"% ",1),r(S,null,{default:p(()=>[r(K(Le))]),_:1})])):te("",!0)]),y("div",$t,[w.alive_num==w.total_num?(z(),H("span",Ht,[j(" 100% "),r(S,null,{default:p(()=>[r(K(Se))]),_:1})])):te("",!0)])])])]),_:1}),r(X,{span:8},{default:p(()=>[y("div",Kt,[r(q,{value:w.dead_num,title:"New transactions today"},{title:p(()=>[y("div",Rt,[j(" agent离线数 "),r(Q,{effect:"dark",content:"目前离线的agent数量",placement:"top"},{default:p(()=>[r(S,{style:{"margin-left":"4px"},size:12},{default:p(()=>[r(K(me))]),_:1})]),_:1})])]),_:1},8,["value"]),y("div",Wt,[y("div",qt,[Jt,w.alive_num<w.total_num?(z(),H("span",Qt,[j(J(Math.floor(w.dead_num/w.total_num*100))+"% ",1),r(S,null,{default:p(()=>[r(K(Se))]),_:1})])):te("",!0),w.alive_num==w.total_num?(z(),H("span",Yt,[j(" 0% "),r(S,null,{default:p(()=>[r(K(Le))]),_:1})])):te("",!0)]),Zt])])]),_:1})]),_:1})]),_:1}),Gt,r(Pe,null,{default:p(()=>[y("div",Xt,[r(ee,{type:"primary",disabled:!L.value.length,onClick:c},{default:p(()=>[j(" 批量下发 ")]),_:1},8,["disabled"]),r(ee,{type:"primary",onClick:m},{default:p(()=>[j(" 查询 ")]),_:1}),r(_e,{modelValue:a.type,"onUpdate:modelValue":s[0]||(s[0]=i=>a.type=i),placeholder:"类型",style:{width:"240px"},disabled:G.value},{default:p(()=>[(z(),H(fe,null,he(h,i=>r(be,{key:i.value,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"]),r(_e,{modelValue:a.platform,"onUpdate:modelValue":s[1]||(s[1]=i=>a.platform=i),placeholder:"平台",style:{width:"240px"},disabled:G.value},{default:p(()=>[(z(),H(fe,null,he(g,i=>r(be,{key:i.value,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"]),r(_e,{modelValue:a.active,"onUpdate:modelValue":s[2]||(s[2]=i=>a.active=i),placeholder:"状态",style:{width:"240px"},disabled:G.value},{default:p(()=>[(z(),H(fe,null,he(x,i=>r(be,{key:i.value,label:i.label,value:i.value},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"]),r(pe,{modelValue:a.ip,"onUpdate:modelValue":s[3]||(s[3]=i=>a.ip=i),style:{width:"240px"},placeholder:"请输入ip地址",onInput:s[4]||(s[4]=()=>ae("ip"))},null,8,["modelValue"]),r(pe,{modelValue:a.uuid,"onUpdate:modelValue":s[5]||(s[5]=i=>a.uuid=i),style:{width:"240px"},placeholder:"请输入机器uuid",onInput:s[6]||(s[6]=()=>ae("uuid"))},null,8,["modelValue"]),r(pe,{modelValue:a.c_desc,"onUpdate:modelValue":s[7]||(s[7]=i=>a.c_desc=i),style:{width:"240px"},placeholder:"请输入配置id",onInput:s[8]||(s[8]=()=>ae("c_desc"))},null,8,["modelValue"]),r(pe,{modelValue:a.c_desc2,"onUpdate:modelValue":s[9]||(s[9]=i=>a.c_desc2=i),style:{width:"240px"},placeholder:"请输入更新失败的配置id",onInput:s[10]||(s[10]=()=>ae("c_desc2"))},null,8,["modelValue"])]),dt((z(),Ee(Ge,{data:P.value,border:"",style:{width:"100%"},onSelectionChange:l},{default:p(()=>[r(B,{type:"selection",width:"55",selectable:k}),r(B,{prop:"uuid","min-width":"320"},{header:p(()=>[y("div",en,[j(" UUID "),r(Q,{effect:"dark",content:"悬浮查看资源占比",placement:"top"},{default:p(()=>[r(S,{style:{"margin-left":"4px"},size:12},{default:p(()=>[r(K(me))]),_:1})]),_:1})])]),default:p(({row:i})=>[i.active===1?(z(),Ee(Ze,{key:0,trigger:"hover",placement:"top",title:"资源 (仅参考)",width:"300","show-after":"100"},{reference:p(()=>[y("span",null,J(i.uuid),1)]),default:p(()=>[y("div",null,[y("div",tn,[y("p",nn,"CPU使用率: "+J(i.cpu_use),1),r(we,{percentage:le(i.cpu_use),status:le(i.cpu_use)>80?"exception":le(i.cpu_use)>60?"warning":"success",format:$=>`${$}%`},null,8,["percentage","status","format"])]),y("div",an,[y("p",ln,"内存使用率: "+J(i.memory_use),1),r(we,{percentage:le(i.memory_use),status:le(i.memory_use)>80?"exception":le(i.memory_use)>60?"warning":"success",format:$=>`${$}%`},null,8,["percentage","status","format"])]),i.disk_use?(z(!0),H(fe,{key:0},he(Qe(i.disk_use),($,De)=>(z(),H("div",{key:De,class:"resource-item"},[y("p",on,"磁盘 "+J(De)+" 使用率: "+J($)+"%",1),r(we,{percentage:$,status:$>80?"exception":$>60?"warning":"success",format:tt=>`${tt}%`},null,8,["percentage","status","format"])]))),128)):te("",!0)])]),_:2},1024)):te("",!0)]),_:1}),r(B,{prop:"active",label:"活跃状态","min-width":"100"},{default:p(({row:i})=>[r(Te,{type:i.active===1?"success":"danger"},{default:p(()=>[j(J(i.active===1?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),r(B,{prop:"status",label:"状态","min-width":"150"},{default:p(({row:i})=>[r(Te,{type:_(i.status)},{default:p(()=>[j(J(i.status),1)]),_:2},1032,["type"])]),_:1}),r(B,{prop:"hostname",label:"主机名","min-width":"150"}),r(B,{prop:"ipv4_first",label:"IPv4","min-width":"120"}),r(B,{prop:"platform",label:"平台","min-width":"100"}),r(B,{prop:"os",label:"操作系统","min-width":"100"}),r(B,{prop:"kernel",label:"内核版本","min-width":"100"}),r(B,{prop:"machine_type",label:"机器类型","min-width":"100"}),r(B,{prop:"action_detail",label:"配置详情","min-width":"150"}),r(B,{prop:"arch",label:"arch型号","min-width":"100"}),r(B,{prop:"grpc_port",label:"GRPC端口","min-width":"100"}),r(B,{label:"操作","min-width":"185",fixed:"right"},{default:p(({row:i})=>[r(ke,null,{default:p(()=>[r(ee,{size:"small",type:"primary",onClick:$=>re(i)},{default:p(()=>[j(" 数据 ")]),_:2},1032,["onClick"]),r(ee,{size:"small",type:"primary",onClick:$=>ie(i)},{default:p(()=>[j(" 容量 ")]),_:2},1032,["onClick"]),r(ee,{size:"small",type:"danger",onClick:$=>M(i)},{default:p(()=>[j(" 删除 ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[et,I.value]]),y("div",rn,[r(Xe,{"current-page":V.currentPage,"onUpdate:currentPage":s[11]||(s[11]=i=>V.currentPage=i),"page-size":V.pageSize,"onUpdate:pageSize":s[12]||(s[12]=i=>V.pageSize=i),"page-sizes":[10,20,50,100],total:V.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:v,onCurrentChange:C},null,8,["current-page","page-size","total"])])]),_:1}),r(Ce,{modelValue:t.value,"onUpdate:modelValue":s[14]||(s[14]=i=>t.value=i),title:"下发配置",width:"50%"},{default:p(()=>[r(rt,{visible:t.value,"onUpdate:visible":s[13]||(s[13]=i=>t.value=i),"selected-hosts":L.value},null,8,["visible","selected-hosts"])]),_:1},8,["modelValue"]),r(Ce,{modelValue:n.value,"onUpdate:modelValue":s[17]||(s[17]=i=>n.value=i),title:b.value,width:"80%"},{default:p(()=>[y("div",sn,[r(K(Me),{deep:3,showSelectController:!0,highlightMouseoverNode:!0,path:"res",data:f.value,height:700,virtual:!0,"show-icon":!0,editable:!1,"show-line-number":!0},null,8,["data"])]),r(ke,null,{default:p(()=>[r(ee,{size:"small",type:"primary",onClick:s[15]||(s[15]=i=>oe(f.value.uuid,"stand1"))},{default:p(()=>[j(" 标准类型1(默认) ")]),_:1}),r(ee,{size:"small",type:"primary",onClick:s[16]||(s[16]=i=>oe(f.value.uuid,"stand2"))},{default:p(()=>[j(" 标准类型2 ")]),_:1})]),_:1})]),_:1},8,["modelValue","title"]),r(Ce,{modelValue:o.value,"onUpdate:modelValue":s[18]||(s[18]=i=>o.value=i),title:b.value,width:"80%"},{default:p(()=>[y("div",cn,[r(K(Me),{deep:3,showSelectController:!0,highlightMouseoverNode:!0,path:"res",data:N.value,height:700,virtual:!0,"show-icon":!0,editable:!1,"show-line-number":!0},null,8,["data"])]),r(ke)]),_:1},8,["modelValue","title"])])}}}),vn=ot(un,[["__scopeId","data-v-8f4167bb"]]);export{vn as default};
