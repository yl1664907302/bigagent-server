var R=Object.defineProperty;var y=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var h=(m,r,t)=>r in m?R(m,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):m[r]=t,q=(m,r)=>{for(var t in r||(r={}))T.call(r,t)&&h(m,t,r[t]);if(y)for(var t of y(r))N.call(r,t)&&h(m,t,r[t]);return m};var b=(m,r,t)=>new Promise((d,g)=>{var l=s=>{try{V(t.next(s))}catch(n){g(n)}},_=s=>{try{V(t.throw(s))}catch(n){g(n)}},V=s=>s.done?d(s.value):Promise.resolve(s.value).then(l,_);V((t=t.apply(m,r)).next())});import{r as U,w as S,ai as f,m as x,M as w,O as u,U as e,R as B,S as O,a2 as j}from"./vue-chunks-QFn3aUvO.js";import{o as D}from"./index-BGZQasTF.js";import{b as k}from"./element-plus-C3gpGjIx.js";const G={__name:"form_edit",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","submit","reset"],setup(m,{emit:r}){const t={title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符之间",trigger:"blur"}],details:[{required:!1,max:200,message:"长度不能超过 200 个字符",trigger:"blur"}],host:[{required:!0,message:"请输入通信地址",trigger:"blur"},{message:"请输入有效的grpc套接字地址，可选端口号(192.168.1.1:8080)",trigger:"blur"}],auth_name:[{required:!0,message:"请选择认证模式",trigger:"change"}],data_name:[{required:!0,message:"请选择数据名称",trigger:"change"}],solt_name:[{required:!0,message:"请选择槽位",trigger:"change"},{message:"请输入数据接收方配置存放槽位"}],token:[{required:!0,message:"请输入Token",trigger:"blur"}],ranges:[{required:!0,message:"请选择范围",trigger:"change"}]},d=m,g=r,l=U({id:d.modelValue.id,title:d.modelValue.title||"",details:d.modelValue.details||"",host:d.modelValue.host||"",auth_name:d.modelValue.auth_name||"",data_name:d.modelValue.data_name||"",slot_name:d.modelValue.slot_name||"",token:d.modelValue.token||"",collection_frequency:d.modelValue.collection_frequency||""});S(()=>d.modelValue,n=>{l.value=q({},n)},{deep:!0});const _=U(null),V=()=>b(this,null,function*(){if(_.value)try{yield _.value.validate(n=>b(this,null,function*(){if(n){const a=yield D(l.value);a.code===0?(k.success("提交成功"),s(),g("submit",l.value)):k.error(a.msg||"提交失败")}}))}catch(n){console.error("提交出错：",n),k.error("提交出错，请重试")}}),s=()=>{var n;(n=_.value)==null||n.resetFields(),g("reset")};return(n,a)=>{const c=f("el-input"),i=f("el-form-item"),p=f("el-option"),v=f("el-select"),C=f("el-button"),M=f("el-form");return x(),w(M,{model:l.value,rules:t,ref_key:"formRef",ref:_,"label-width":"120px",onSubmit:a[8]||(a[8]=j(()=>{},["prevent"]))},{default:u(()=>[e(i,{label:"标题",prop:"title"},{default:u(()=>[e(c,{modelValue:l.value.title,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.title=o),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),e(i,{label:"备注",prop:"details"},{default:u(()=>[e(c,{type:"textarea",modelValue:l.value.details,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.details=o),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),e(i,{label:"通信地址",prop:"host"},{default:u(()=>[e(c,{modelValue:l.value.host,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.host=o),placeholder:"请输入主机"},null,8,["modelValue"])]),_:1}),e(i,{label:"认证模式",prop:"authMode"},{default:u(()=>[e(v,{modelValue:l.value.auth_name,"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.auth_name=o),placeholder:"请选择认证模式"},{default:u(()=>[e(p,{label:"token认证",value:"token"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"数据名称",prop:"data_name"},{default:u(()=>[e(v,{modelValue:l.value.data_name,"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.data_name=o),placeholder:"请输入数据名称"},{default:u(()=>[e(p,{label:"标准数据类型1",value:"stand1"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"槽位名称",prop:"slot_name"},{default:u(()=>[e(v,{modelValue:l.value.slot_name,"onUpdate:modelValue":a[5]||(a[5]=o=>l.value.slot_name=o),placeholder:"请输入数据名称"},{default:u(()=>[e(p,{label:"槽位1",value:"1"}),e(p,{label:"槽位2",value:"2"}),e(p,{label:"槽位3",value:"3"})]),_:1},8,["modelValue"])]),_:1}),l.value.auth_name==="token"?(x(),w(i,{key:0,label:"Token",prop:"token"},{default:u(()=>[e(c,{modelValue:l.value.token,"onUpdate:modelValue":a[6]||(a[6]=o=>l.value.token=o),placeholder:"请输入Token"},null,8,["modelValue"])]),_:1})):B("",!0),e(i,{label:"上报与采集频次",prop:"collection_frequency"},{default:u(()=>[e(v,{modelValue:l.value.collection_frequency,"onUpdate:modelValue":a[7]||(a[7]=o=>l.value.collection_frequency=o),placeholder:"请输入频次"},{default:u(()=>[e(p,{label:"每秒一次",value:"1s"}),e(p,{label:"每秒二次",value:"2s"}),e(p,{label:"每秒三次",value:"3s"})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:u(()=>[e(C,{type:"primary",onClick:V},{default:u(()=>[O("提交")]),_:1})]),_:1})]),_:1},8,["model"])}}};export{G as default};
