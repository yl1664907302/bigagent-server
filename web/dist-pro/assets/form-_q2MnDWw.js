var T=Object.defineProperty;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var U=(s,r,t)=>r in s?T(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,V=(s,r)=>{for(var t in r||(r={}))N.call(r,t)&&U(s,t,r[t]);if(h)for(var t of h(r))S.call(r,t)&&U(s,t,r[t]);return s};var k=(s,r,t)=>new Promise((v,g)=>{var l=d=>{try{_(t.next(d))}catch(n){g(n)}},p=d=>{try{_(t.throw(d))}catch(n){g(n)}},_=d=>d.done?v(d.value):Promise.resolve(d.value).then(l,p);_((t=t.apply(s,r)).next())});import{r as x,w as B,ai as f,m as w,M as C,O as o,U as e,R as O,S as M,a2 as j}from"./vue-chunks-QFn3aUvO.js";import{n as D}from"./index-BGZQasTF.js";import{b as y}from"./element-plus-C3gpGjIx.js";const G={__name:"form",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","submit","reset"],setup(s,{emit:r}){const t={title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符之间",trigger:"blur"}],details:[{required:!1,max:200,message:"长度不能超过 200 个字符",trigger:"blur"}],host:[{required:!0,message:"请输入通信地址",trigger:"blur"},{message:"请输入有效的grpc套接字地址，可选端口号(192.168.1.1:8080)",trigger:"blur"}],auth_name:[{required:!0,message:"请选择认证模式",trigger:"change"}],data_name:[{required:!0,message:"请选择数据名称",trigger:"change"}],solt_name:[{required:!0,message:"请选择槽位",trigger:"change"},{message:"请输入数据接收方配置存放槽位"}],token:[{required:!0,message:"请输入Token",trigger:"blur"}],ranges:[{required:!0,message:"请选择范围",trigger:"change"}]},v=s,g=r,l=x(V({},v.modelValue));B(()=>v.modelValue,n=>{l.value=V({},n)},{deep:!0});const p=x(null),_=()=>k(this,null,function*(){if(p.value)try{yield p.value.validate(n=>k(this,null,function*(){if(n){const a=yield D(l.value);a.code===0?(y.success("提交成功"),d(),g("submit",l.value)):y.error(a.msg||"提交失败")}}))}catch(n){console.error("提交出错：",n),y.error("提交出错，请重试")}}),d=()=>{var n;(n=p.value)==null||n.resetFields(),g("reset")};return(n,a)=>{const c=f("el-input"),m=f("el-form-item"),i=f("el-option"),b=f("el-select"),q=f("el-button"),R=f("el-form");return w(),C(R,{model:l.value,rules:t,ref_key:"formRef",ref:p,"label-width":"120px",onSubmit:a[8]||(a[8]=j(()=>{},["prevent"]))},{default:o(()=>[e(m,{label:"标题",prop:"title"},{default:o(()=>[e(c,{modelValue:l.value.title,"onUpdate:modelValue":a[0]||(a[0]=u=>l.value.title=u),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),e(m,{label:"备注",prop:"details"},{default:o(()=>[e(c,{type:"textarea",modelValue:l.value.details,"onUpdate:modelValue":a[1]||(a[1]=u=>l.value.details=u),placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),e(m,{label:"通信地址",prop:"host"},{default:o(()=>[e(c,{modelValue:l.value.host,"onUpdate:modelValue":a[2]||(a[2]=u=>l.value.host=u),placeholder:"请输入主机"},null,8,["modelValue"])]),_:1}),e(m,{label:"认证模式",prop:"authMode"},{default:o(()=>[e(b,{modelValue:l.value.auth_name,"onUpdate:modelValue":a[3]||(a[3]=u=>l.value.auth_name=u),placeholder:"请选择认证模式"},{default:o(()=>[e(i,{label:"token认证",value:"token"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"数据名称",prop:"data_name"},{default:o(()=>[e(b,{modelValue:l.value.data_name,"onUpdate:modelValue":a[4]||(a[4]=u=>l.value.data_name=u),placeholder:"请输入数据名称"},{default:o(()=>[e(i,{label:"标准数据类型1",value:"stand1"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"槽位名称",prop:"slot_name"},{default:o(()=>[e(b,{modelValue:l.value.slot_name,"onUpdate:modelValue":a[5]||(a[5]=u=>l.value.slot_name=u),placeholder:"请输入数据名称"},{default:o(()=>[e(i,{label:"槽位1",value:"1"}),e(i,{label:"槽位2",value:"2"}),e(i,{label:"槽位3",value:"3"})]),_:1},8,["modelValue"])]),_:1}),l.value.auth_name==="token"?(w(),C(m,{key:0,label:"Token",prop:"token"},{default:o(()=>[e(c,{modelValue:l.value.token,"onUpdate:modelValue":a[6]||(a[6]=u=>l.value.token=u),placeholder:"请输入Token"},null,8,["modelValue"])]),_:1})):O("",!0),e(m,{label:"上报与采集频次",prop:"collection_frequency"},{default:o(()=>[e(b,{modelValue:l.value.collection_frequency,"onUpdate:modelValue":a[7]||(a[7]=u=>l.value.collection_frequency=u),placeholder:"请输入频次"},{default:o(()=>[e(i,{label:"每秒一次",value:"1s"}),e(i,{label:"每秒二次",value:"2s"}),e(i,{label:"每秒三次",value:"3s"})]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:o(()=>[e(q,{type:"primary",onClick:_},{default:o(()=>[M("提交")]),_:1}),e(q,{onClick:d},{default:o(()=>[M("重置")]),_:1})]),_:1})]),_:1},8,["model"])}}};export{G as default};
